function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}if(!window.LATTICE_API)window.LATTICE_API="https://mean-chicken-chew-103-79-255-85.loca.lt/";(function(){var randomKey="TDVnebyb7k";var LATTICEAI_ENV=function(){if(window.LATTICE_API.includes("api.latticeai.io")||window.LATTICE_API.includes("api.shopagain.io")){return"prod"}else if(window.LATTICE_API.includes("mercuryapi-staging.latticeai.io")){return"staging"}else{return"dev"}}();var api={company_id:null,apikey:null,scriptSearchParams:null,Settings:{},Context:{},CurrentScript:null,session_id:null,lastActiveSeconds:0,cart_token:null,is_first_api_called:false,clientCountryCode:null,callApiEvent:function callApiEvent(){api.session_id=api.getSessionId();var current_time=new Date().getTime();var timeSpentOnPage=TimeMe.getTimeOnCurrentPageInSeconds();var currantActiveSeconds=parseInt(timeSpentOnPage)-api.lastActiveSeconds;api.lastActiveSeconds=parseInt(timeSpentOnPage);var inactive_start_time=api.getSessionInactiveTime();var inactive_time=0;if(inactive_start_time&&inactive_start_time>0&&current_time>=inactive_start_time){inactive_time=(current_time-inactive_start_time)/1000}var session_start_time=api.getSessionStartTime();if(!session_start_time||current_time<session_start_time||!api.session_id){api.setSessionStartTime(current_time);session_start_time=current_time;api.deleteSessionId();api.session_id=null;inactive_time=0}var session_time=(current_time-session_start_time)/1000;var params={session_id:api.session_id,url:window.location.href,visit_time:currantActiveSeconds,uid:api.getUidCookie(),pid:api.getPidCookie(),session_time:session_time,inactive_time:inactive_time,cart_token:api.cart_token||null,browser_height:window.screen.height,browser_width:window.screen.width};api.Services.createEventActivity(params).then(function(response){return response.json()}).then(function(res){var data=res.data;if(data){api.session_id=data===null||data===void 0?void 0:data.session_id;api.setSessionId(data===null||data===void 0?void 0:data.session_id);api.setSessionStatus(data===null||data===void 0?void 0:data.session_status);if((data===null||data===void 0?void 0:data.session_status)==="FIRST_ACTIVE"){api.setSessionStartTime(new Date().getTime());api.deleteSessionInactiveTime()}if((data===null||data===void 0?void 0:data.session_status)==="INACTIVE"){api.deleteSessionInactiveTime()}}}).catch(function(error){console.log(error)})},isCookiesEnabled:function isCookiesEnabled(){try{document.cookie="cookietest=1";var cookiesEnabled=document.cookie.indexOf("cookietest=")!==-1;document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT";return cookiesEnabled}catch(e){return false}},startTrackingScript:function startTrackingScript(){var timeScriptUrl=window.shopagain_timeme_script_url?new URL("",window.shopagain_timeme_script_url):new URL("/shopify/timeme.js",new URL(api.CurrentScript.src).href);var timemeScript=document.createElement("script");timemeScript.src=timeScriptUrl.toString();timemeScript.async=true;timemeScript.type="text/javascript";document.head.appendChild(timemeScript);timemeScript.addEventListener("load",function(){TimeMe.initialize({currentPageName:window.location.href,idleTimeoutInSeconds:5});api.callApiEvent();api.is_first_api_called=true;api.deleteSessionInactiveTime();TimeMe.callWhenUserLeaves(function(){if(api.is_first_api_called){var time=new Date().getTime();api.setSessionInactiveTime(time)}});TimeMe.callWhenUserReturns(function(){if(api.is_first_api_called){api.deleteSessionInactiveTime();var status=api.getSessionStatus();if(status==="INACTIVE"){api.setSessionStartTime(new Date().getTime())}api.setSessionStatus("ACTIVE")}});setInterval(function async(){var isActive=api.getSessionStatus()!=="INACTIVE";if(isActive)api.callApiEvent()},30000);if(!api.cart_token){var cookieInterval=setInterval(function(){var cart_token=api.getCartToken();if(cart_token&&api.is_first_api_called){api.cart_token=cart_token;clearInterval(cookieInterval);api.callApiEvent()}},3000)}})},addWidgetScript:function addWidgetScript(scriptUrl){var currentScriptUrlObj=new URL(scriptUrl);;var currentScriptSearchParams=currentScriptUrlObj.searchParams;api.scriptSearchParams=currentScriptSearchParams;var store=currentScriptSearchParams.get("store");if((!window.Shopify||!window.Shopify.shop)&&store!=="woocommerce"){console.log("skipping widgets...");return}var shop="";if(store==="woocommerce"){var windowUrl=new URL(window.location.href);shop=windowUrl.hostname}else{shop=window.Shopify.shop}var scriptId="shopagain-widget-script-".concat(LATTICEAI_ENV);var existingScript=document.getElementById(scriptId);if(existingScript){return}var widgetScript=document.createElement("script");var widgetScriptSrcUrl=window.shopagain_widget_script_url?new URL("",window.shopagain_widget_script_url):new URL("/shopify/widgets.js","https://".concat(scriptUrl.host));widgetScriptSrcUrl.searchParams.append("shop",shop);widgetScriptSrcUrl.searchParams.append("v",4);currentScriptSearchParams.forEach((value,key)=>{widgetScriptSrcUrl.searchParams.append(key,value)});widgetScript.src=widgetScriptSrcUrl.toString();widgetScript.id=scriptId;widgetScript.type="text/javascript";document.head.appendChild(widgetScript)},start:function(){var _start=_asyncToGenerator(function*(){var _window,_window$ShopifyAnalyt,_window$ShopifyAnalyt2,_window$ShopifyAnalyt3;var currentScript=api.CurrentScript;var src=currentScript.src;var scriptUrl=new URL(src);var scriptSearchParams=scriptUrl.searchParams;api.scriptSearchParams=scriptSearchParams;var shop=scriptSearchParams.get("shop");var company_id=scriptSearchParams.get("company_id");var apikey=scriptSearchParams.get("webkey");var store=scriptSearchParams.get("store");if(!company_id&&!apikey){console.warn("company_id or apikey is required");return}api.company_id=company_id;api.apikey=apikey;var windowHref=window.location.href;var parsedWindowHref=new URL(windowHref);var params=parsedWindowHref.searchParams;var audience_user_id=params.get("sa_a_id");if(audience_user_id){api.setUidCookie(audience_user_id)}api.popUpSessionMap=api.getPopUpSessionMap();var session_id=api.getSessionId();var session_start_time=api.getSessionStartTime();api.cart_token=api.getCartToken();if(session_id){api.session_id=session_id}if(!session_id||!session_start_time){api.setSessionStartTime(new Date().getTime())}var customerId=((_window=window)===null||_window===void 0?void 0:(_window$ShopifyAnalyt=_window.ShopifyAnalytics)===null||_window$ShopifyAnalyt===void 0?void 0:(_window$ShopifyAnalyt2=_window$ShopifyAnalyt.meta)===null||_window$ShopifyAnalyt2===void 0?void 0:(_window$ShopifyAnalyt3=_window$ShopifyAnalyt2.page)===null||_window$ShopifyAnalyt3===void 0?void 0:_window$ShopifyAnalyt3.customerId)||null;var resp=yield api.Services.getPopupUser(customerId,api.getPidCookie(),api.getUidCookie());var data=yield resp.json();var pid=data.pid;var uid=data.uid;api.clientCountryCode=data.client_country_code;window.clientCountryCode=data.client_country_code;api.setPidCookie(pid);if(uid){api.setUidCookie(uid)}else{api.deleteUidCookie()}if(company_id||store==="woocommerce"){api.startTrackingScript()}window.onbeforeunload=function(event){var time=new Date().getTime();api.setSessionInactiveTime(time)};document.addEventListener("scroll",api.handleScroll);var currentSeconds=0;setInterval(()=>{api.handleTimerTick(++currentSeconds)},1000);var addEvent=function addEvent(obj,evt,fn){if(obj.addEventListener){obj.addEventListener(evt,fn,false)}else if(obj.attachEvent){obj.attachEvent("on"+evt,fn)}};addEvent(document,"mouseout",function(event){event=event?event:window.event;var from=event.relatedTarget||event.toElement;if((!from||from.nodeName=="HTML")&&event.clientY<=100){api.PopupQueue.push(...api.ExitQueue);api.processNextPopup();api.ExitQueue=[]}});var onMobileDeviceClassname="latticeai-on-mobile-device";document.addEventListener("touchstart",function(){document.body.classList.add(onMobileDeviceClassname)});function myScrollSpeedFunction(){if(document.body.classList.contains(onMobileDeviceClassname)){if(my_scroll()<-30){api.PopupQueue.push(...api.ExitQueue);api.processNextPopup();api.ExitQueue=[]}}}var my_scroll=function(){var last_position,new_position,timer,delta,delay=50;function clear(){last_position=null;delta=0}clear();return function(){new_position=window.scrollY;if(last_position!=null){delta=new_position-last_position}last_position=new_position;clearTimeout(timer);timer=setTimeout(clear,delay);return delta}}();document.addEventListener("scroll",myScrollSpeedFunction);var settings=yield(yield api.Services.getConfig(api.read_cookie("pid"),api.read_cookie("uid"))).json();api.Settings=settings;try{var forms=[...document.querySelectorAll("form[action*=\"/cart/add\"]")];var _loop=function _loop(form){form.addEventListener("submit",function(e){if(api.AddToCartQueue.length){var _data=new FormData(form);var startTime=Date.now();var body=_objectSpread(_objectSpread({},Object.fromEntries(_data)),{},{page_url:window.location.href});fetch(api.Services.getUrl("/campaigns/popups/cross_sell_popop/"),api.Services.updateOptions({method:"POST",body:JSON.stringify(body),headers:{"Content-Type":"application/json"}})).then(resp=>resp.json()).then(data=>{if(api.AddToCartQueue.length){var endTime=Date.now();var apiCallDuration=endTime-startTime;var timeoutDuration=Math.max(2000-apiCallDuration,0);setTimeout(()=>{api.PopupQueue.push(_objectSpread(_objectSpread({},api.AddToCartQueue[0]),{},{widgetData:data}));api.processNextPopup()},timeoutDuration)}})}})};for(var form of forms){_loop(form)}}catch(e){console.log(e)}var popups=settings||[];popups.forEach(popup=>{var _inclusion_rules$rule,_inclusion_rules$cust,_exclusion_rules$rule,_exclusion_rules$cust;if(!this.checkIfPopupCanBeShown(popup)){return}var{behaviour,schedule,targeting}=popup;var{timing,frequency}=behaviour;var{days_after_closing}=frequency;var{type:timingType}=timing;var{url}=targeting;var{inclusion_rules,exclusion_rules}=url;var inclusionRulesEmpty=!(inclusion_rules!==null&&inclusion_rules!==void 0&&(_inclusion_rules$rule=inclusion_rules.rules)!==null&&_inclusion_rules$rule!==void 0&&_inclusion_rules$rule.length)&&!(inclusion_rules!==null&&inclusion_rules!==void 0&&(_inclusion_rules$cust=inclusion_rules.customRules)!==null&&_inclusion_rules$cust!==void 0&&_inclusion_rules$cust.length);var rulesEmpty=inclusionRulesEmpty&&!(exclusion_rules!==null&&exclusion_rules!==void 0&&(_exclusion_rules$rule=exclusion_rules.rules)!==null&&_exclusion_rules$rule!==void 0&&_exclusion_rules$rule.length)&&!(exclusion_rules!==null&&exclusion_rules!==void 0&&(_exclusion_rules$cust=exclusion_rules.customRules)!==null&&_exclusion_rules$cust!==void 0&&_exclusion_rules$cust.length);if(!rulesEmpty){if(api.ruleMatchingUrl(exclusion_rules))return;if(!inclusionRulesEmpty&&!api.ruleMatchingUrl(inclusion_rules))return}if(timingType==="immediate"){api.PopupQueue.push(popup)}else if(timingType==="delay"){var{exiting,scroll_percent,seconds_after_page_load,add_to_cart}=timing;if(scroll_percent){api.addToScrollQueue(popup,scroll_percent)}if(seconds_after_page_load){api.addToTimerQueue(popup,seconds_after_page_load)}if(exiting){api.addToExitQueue(popup)}if(add_to_cart){api.addToAddToCartQueue(popup)}if(!scroll_percent&&!seconds_after_page_load&&!exiting&&!add_to_cart){api.PopupQueue.push(popup)}}});api.handleScroll();api.processNextPopup()});function start(){return _start.apply(this,arguments)}return start}(),ruleMatchingUrl:function ruleMatchingUrl(rule){var{rules,customRules}=rule;var urlStr=window.location.href;var url=new URL(urlStr);var path=url.pathname;if(rules.includes("all_pages"))return true;if(rules.includes("home_page")&&(path==="/"||!path))return true;if(rules.includes("product_pages")&&path.includes("/products/"))return true;if(rules.includes("about_page")&&path.includes("/about"))return true;if(customRules){for(var i=0;i<customRules.length;i++){var{value,type}=customRules[i];if(type==="exact_match"){if(path===value)return true}if(type==="contains"){if(path.includes(value))return true}}}},ScrollQueue:{},TimerQueue:{},ExitQueue:[],AddToCartQueue:[],handleScroll(){var lastKnownScrollPosition=window.scrollY;var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight";var percent=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;var scrollQueueKeys=Object.keys(api.ScrollQueue);scrollQueueKeys.forEach(scrollPKey=>{if(Number(scrollPKey)<=percent){api.PopupQueue.push(...api.ScrollQueue[scrollPKey]);delete api.ScrollQueue[scrollPKey]}});api.processNextPopup()},handleTimerTick(seconds){var timerQueueKeys=Object.keys(api.TimerQueue);timerQueueKeys.forEach(timerKey=>{if(Number(timerKey)<=seconds){api.PopupQueue.push(...api.TimerQueue[timerKey]);delete api.TimerQueue[timerKey]}});api.processNextPopup()},addToScrollQueue:function addToScrollQueue(popup,scrollPercent){if(api.ScrollQueue[scrollPercent]){api.ScrollQueue[scrollPercent].push(popup)}else{api.ScrollQueue[scrollPercent]=[popup]}},addToTimerQueue:function addToTimerQueue(popup,seconds){if(api.TimerQueue[seconds]){api.ScrollQueue[seconds].push(popup)}else{api.TimerQueue[seconds]=[popup]}},addToExitQueue:function addToExitQueue(popup){api.ExitQueue.push(popup)},addToAddToCartQueue:function addToAddToCartQueue(popup){api.AddToCartQueue.push(popup)},PopupQueue:[],ShowingPopup:false,popUpSessionMap:{},processNextPopup:function processNextPopup(){var _api$PopupQueue;if(!((_api$PopupQueue=api.PopupQueue)!==null&&_api$PopupQueue!==void 0&&_api$PopupQueue.length))return;var newPopup=api.PopupQueue.splice(0,1)[0];if(this.ShowingPopup&&!newPopup.widgetData)return;if(!this.checkIfPopupCanBeShown(newPopup)){api.processNextPopup();return}var{enable,before_popup}=newPopup.minimize_icon_config;if(enable&&before_popup&&!api.isMobileDevice()){api.displayButtonToShowLastPopup(newPopup);return}if(api.popUpSessionMap&&api.popUpSessionMap[api.session_id]&&api.popUpSessionMap[api.session_id]!==newPopup.id+"-"){api.processNextPopup();return}api.popUpSessionMap[api.session_id]=newPopup.id+"-";api.setPopUpSessionMap(api.popUpSessionMap);api.displayPopup(newPopup).catch(e=>{console.log(e);var container="latticeai-popup-container";var containerElement=document.getElementById(container);if(containerElement){containerElement.remove()}api.Services.createPopupActivity(newPopup.id,"EXCEPTION",JSON.stringify(e,Object.getOwnPropertyNames(e)))});api.ShowingPopup=true},displayPopup:function(){var _displayPopup=_asyncToGenerator(function*(popup){var _this=this;var activityType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"VIEWED";var lastPopUpButton=document.querySelector(".latticeai-popup-revert-button");if(lastPopUpButton){lastPopUpButton.remove()}var{behaviour,schedule,targeting,popup_config}=popup;var{timing,frequency}=behaviour;var{days_after_closing}=frequency;var{flyoutPosition,type:popupType,animateFlyout,sideImageSrc,version}=popup_config;var{enable,after_popup_cancel}=popup.minimize_icon_config;var formDoc="";var successDoc="";if(version){var{formData,successData}=popup;formDoc="\n                <style id=\"wrapperCss\">\n                    ".concat(popup.wrapperCss,"\n                </style>\n                <style id=\"elementsCss\">\n                    ").concat(formData.css,"\n                </style>\n                <style id=\"commonCss\">\n                    ").concat(popup.commonCss,"\n                </style>\n\n                <style>\n                    * {box-sizing: border-box;}\n                    body {margin: 0;}\n                </style>\n\n                <div>\n                    <div id=\"ijwx\">\n                        <svg class=\"la-popup-close-icon\" width=\"25px\" height=\"25px\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" id=\"clos\"><path d=\"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z\" fill=\"none\" stroke=\"currentColor\" stroke-miterlimit=\"10\" stroke-width=\"32\"></path><path d=\"M320 320L192 192M192 320l128-128\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"></path></svg>\n                        <div data-gjs-type=\"OUTER_WRAPPER\" id=\"OUTER_WRAPPER\">\n                            <div id=\"SIDE_IMAGE_WRAPPER\">\n                                <img src=\"").concat(sideImageSrc,"\" id=\"SIDE_IMAGE\"/>\n                            </div>\n                            <form id=\"FORM_CONTAINER\">\n                                ").concat(formData.html,"\n                            </form>\n                        </div>\n                    </div>\n                </div>\n\n                <script>\n                    ").concat(formData.js,"\n                </script>\n            ");successDoc=successData.html}else{formDoc=popup.formDoc;successDoc=popup.successDoc}var randomNumber=Math.floor(Math.random()*1000000);var containerClassName="latticeai-popup-container";var iframeId="latticeai-popup-iframe-".concat(randomNumber);var popupAnimationClassName="latticeai-start-popup-animation";var buttonSpinnerClassname="latticeai-button-spinner-"+randomNumber;var container=document.createElement("div");var ifrm=document.createElement("iframe");ifrm.setAttribute("id",iframeId);ifrm.style.visibility="hidden";ifrm.style.width="100%";ifrm.style.height="100%";ifrm.style.position="fixed";ifrm.style.top="0";ifrm.style.left="0";ifrm.style.zIndex="2147483647";ifrm.setAttribute("frameborder","0");ifrm.style.background="transparent";ifrm.setAttribute("srcdoc","\n                <html>\n                    <head>\n                        ".concat(api.getFontLinks("".concat(formDoc," ").concat(successDoc))||"","\n                    </head>\n\n                    <body>\n                        <div class=\"").concat(containerClassName,"\">\n\n                            <style>\n                                @keyframes spinner-").concat(randomNumber," {\n                                    to {transform: rotate(360deg);}\n                                }\n                    \n                                body {\n                                    text-rendering: optimizeSpeed;\n                                    line-height: 1.5;\n                                }\n\n                                span {\n                                    display: inline-block;\n                                }\n                                \n                                .").concat(containerClassName," .").concat(buttonSpinnerClassname,":before {\n                                    content: '';\n                                    box-sizing: border-box;\n                                    position: absolute;\n                                    top: 50%;\n                                    left: 50%;\n                                    width: 20px;\n                                    height: 20px;\n                                    margin-top: -10px;\n                                    margin-left: -10px;\n                                    border-radius: 50%;\n                                    border-top: 2px solid #07d;\n                                    border-right: 2px solid transparent;\n                                    animation: spinner-").concat(randomNumber," .6s linear infinite;\n                                }\n                    \n                    \n                                .").concat(containerClassName," button[disabled]{\n                                    border: 1px solid #999999;\n                                    background-color: #cccccc !important;\n                                    color: #666666 !important;\n                                }\n                    \n                                .iti__flag {\n                                    display:block !important\n                                }\n\n                                .hide {\n                                    display: none !important;\n                                }\n                                \n                            </style>\n\n\n                            ").concat(formDoc,"\n                        </div>\n                        ").concat(popupType==="popup"?"\n                            <style>\n                                @keyframes fadein {\n                                    from { opacity: 0; }\n                                    to   { opacity: 1; }\n                                }\n                \n                                .".concat(popupAnimationClassName," {\n                                    opacity: 0;\n                                    animation: fadein 1s forwards;\n                                }\n                            </style>\n                            "):"","\n                    </body>\n                </html>\n            "));container.appendChild(ifrm);container.classList.add(containerClassName);var body=document.body;body.appendChild(container);setTimeout(_asyncToGenerator(function*(){var getElement=(selector,parent)=>new Promise(function(){var _ref2=_asyncToGenerator(function*(resolve){while(!parent().querySelector(selector)){console.log("waiting for element",selector);yield new Promise(res=>setTimeout(res,100))}resolve(parent().querySelector(selector))});return function(_x2){return _ref2.apply(this,arguments)}}());container=yield getElement(".".concat(containerClassName),()=>ifrm.contentWindow.document);var modalElement=yield getElement("#ijwx",()=>container);if(version){yield getElement("#FORM_CONTAINER",()=>container);yield getElement("#OUTER_WRAPPER",()=>container)}function doesPointCollide(p,box){return!(p.x<box.left||p.x>box.right||p.y>box.bottom||p.y<box.top)}function doesPhoneInputDropdownCollide(p){var dropdown=ifrm.contentWindow.document.querySelector(".iti__country-list");if(!dropdown)return false;var box=dropdown.getBoundingClientRect();return doesPointCollide(p,box)}var timesPerSecond=20;var wait=false;var handleIframePointerEventChange=e=>{if(popupType!=="flyout"){return}if(!wait){var box=modalElement.getBoundingClientRect();var point={x:e.clientX,y:e.clientY};if(doesPointCollide(point,box)||doesPhoneInputDropdownCollide(point)){ifrm.style.pointerEvents="auto"}else{ifrm.style.pointerEvents="none"}wait=true;setTimeout(function(){wait=false},1000/timesPerSecond)}};document.addEventListener("mousemove",handleIframePointerEventChange);ifrm.contentDocument.addEventListener("mousemove",handleIframePointerEventChange);var handleIframeTouchEventChange=e=>{if(popupType!=="flyout"){return}var clientX=e.touches[0].clientX;var clientY=e.touches[0].clientY;var box=modalElement.getBoundingClientRect();var point={x:clientX,y:clientY};if(doesPointCollide(point,box)||doesPhoneInputDropdownCollide(point)){ifrm.style.pointerEvents="auto"}else{ifrm.style.pointerEvents="none"}};document.addEventListener("touchstart",handleIframeTouchEventChange);ifrm.contentDocument.addEventListener("touchstart",handleIframeTouchEventChange);var closeIcon=yield getElement(".la-popup-close-icon",()=>container);var popupViewId=Math.round(Date.now()).toString(36);var popup_open_seconds=0;var popup_timer=setInterval(()=>{popup_open_seconds++},1000);var isFormSubmitted=false;var closePopup=(e,isBackdropClickedEvent)=>{if(isBackdropClickedEvent){var _e$target,_e$target$classList,_e$target$classList$c;if(!(e!==null&&e!==void 0&&(_e$target=e.target)!==null&&_e$target!==void 0&&(_e$target$classList=_e$target.classList)!==null&&_e$target$classList!==void 0&&(_e$target$classList$c=_e$target$classList.contains)!==null&&_e$target$classList$c!==void 0&&_e$target$classList$c.call(_e$target$classList,_this.popupClassNames.popupBackdrop))){return}if(popupType!=="popup"){return}}clearInterval(popup_timer);ifrm.remove();document.removeEventListener("mousemove",handleIframePointerEventChange);document.removeEventListener("touchstart",handleIframeTouchEventChange);if(!isFormSubmitted){if(enable&&after_popup_cancel&&!api.isMobileDevice())api.displayButtonToShowLastPopup(popup);api.bake_cookie("popup-".concat(popup.id,"-closed-at"),new Date);api.Services.createPopupActivity(popup.id,"CLOSED",{seconds_open:popup_open_seconds,view_id:popupViewId});if(popup_open_seconds<=5){api.Services.createPopupActivity(popup.id,"CLOSED_5S",{seconds_open:popup_open_seconds,view_id:popupViewId})}}};closeIcon.onclick=closePopup;var email_fields=container.querySelectorAll("input[name=\"email\"]");email_fields.forEach(email_field=>{email_field.setAttribute("type","email")});var name_elements=container.querySelectorAll("[name]");var submitButtons=[];var processButtons=isSuccess=>{var buttons=container.querySelectorAll("[data-button-action]");buttons.forEach(button=>{var buttonAction=button.getAttribute("data-button-action");if(buttonAction==="CLOSE_FORM"){button.setAttribute("type","button");button.onclick=closePopup}else if(buttonAction==="GO_TO_URL"){var url=button.getAttribute("data-button-url");if(!!url&&!!url.trim()){url=url.trim();if(!/^(https?:)?\/\//i.test(url)){url="https://"+url}}button.setAttribute("type","button");button.onclick=()=>{window.open(url,"_blank")}}else if(buttonAction==="COPY_DISCOUNT"){button.setAttribute("type","button");var discountBlock=container.querySelector("[data-custom-type=\"DISCOUNT_CODE\"]");if(discountBlock){var el=document.createElement("textarea");el.value=discountBlock.textContent;document.body.appendChild(el);el.select();document.execCommand("copy");document.body.removeChild(el)}}else if(buttonAction==="SUBMIT_FORM"){if(isSuccess){button.setAttribute("type","button");button.onclick=closePopup}else{button.setAttribute("type","submit");submitButtons.push(button)}}})};processButtons(false);var enableSubmitButtonsLoading=()=>{submitButtons.forEach(button=>{button.classList.add(buttonSpinnerClassname);button.style.position="relative";button.setAttribute("disabled","")})};var disableSubmitButtonsLoading=()=>{submitButtons.forEach(button=>{button.classList.remove(buttonSpinnerClassname);button.removeAttribute("disabled")})};var imageElements=container.querySelectorAll("img");imageElements.forEach(imageEl=>{var _imageEl$getAttribute,_imageEl$getAttribute2;var url=(_imageEl$getAttribute=imageEl.getAttribute("data-image-link"))===null||_imageEl$getAttribute===void 0?void 0:(_imageEl$getAttribute2=_imageEl$getAttribute.trim)===null||_imageEl$getAttribute2===void 0?void 0:_imageEl$getAttribute2.call(_imageEl$getAttribute);if(url){imageEl.onclick=()=>{window.open(url,"_blank")};imageEl.style.cursor="pointer"}});var selectElements=container.querySelectorAll("select");selectElements.forEach(selectElement=>{var emptyOption=document.createElement("option");emptyOption.setAttribute("value","");emptyOption.setAttribute("selected","");emptyOption.setAttribute("disabled","");emptyOption.setAttribute("hidden","");emptyOption.innerText="select an option";selectElement.insertBefore(emptyOption,selectElement.firstChild)});var radioElements=container.querySelectorAll("[data-custom-type=\"radio\"]");var processedRadioContainers=[];radioElements.forEach(radioElement=>{var parentNode=radioElement.parentNode;if(processedRadioContainers.includes(parentNode))return;processedRadioContainers.push(parentNode);var name=parentNode.getAttribute("name");parentNode.removeAttribute("name");var required=parentNode.hasAttribute("required");parentNode.removeAttribute("required");var childRadioElements=parentNode.querySelectorAll("[type=\"radio\"]");childRadioElements.forEach(childRadioElement=>{if(name){childRadioElement.setAttribute("name",name)}else{childRadioElement.removeAttribute("name")}if(required){childRadioElement.setAttribute("required","")}else{childRadioElement.removeAttribute("required")}})});var checkboxElements=container.querySelectorAll("[data-custom-type=\"checkbox\"]");var processedCheckboxContainers=[];checkboxElements.forEach(checkboxElement=>{var parentNode=checkboxElement.parentNode;if(processedCheckboxContainers.includes(parentNode))return;processedCheckboxContainers.push(parentNode);var name=parentNode.getAttribute("name");parentNode.removeAttribute("name");var required=parentNode.hasAttribute("required");parentNode.removeAttribute("required");var childCheckboxElements=parentNode.querySelectorAll("[type=\"checkbox\"]");childCheckboxElements.forEach(childCheckboxElement=>{if(name){childCheckboxElement.setAttribute("name",name+"[]")}else{childCheckboxElement.removeAttribute("name")}if(required){childCheckboxElement.setAttribute("required","")}else{childCheckboxElement.removeAttribute("required")}})});ifrm.contentWindow.onIntlTelInputLoad=function(telInputElement){if(!telInputElement)return;if(telInputElement){var iti=ifrm.contentWindow.intlTelInputGlobals.getInstance(telInputElement);if(!iti)return;if(window.clientCountryCode){iti.setCountry(window.clientCountryCode)}container.querySelectorAll(".iti__flag").forEach(el=>{el.style.display="block"});container.querySelectorAll(".iti__arrow").forEach(el=>{el.style.display="block"});telInputElement.addEventListener("open:countrydropdown",function(){var dropdownContainer=ifrm.contentWindow.document.querySelector(".iti.iti--container");dropdownContainer.style.zIndex="99999"})}};var phoneInput=null;var telInputElement=ifrm.contentWindow.document.querySelector("[type='tel'][name='mobile'][data-main-comp=\"true\"]");if(telInputElement){var input=telInputElement;var inputParent=input.parentNode;phoneInput=input;inputParent.insertAdjacentHTML("afterend","\n                        <span id=\"error-msg\" class=\"hide\" style='color:red;'></span>\n                        ");var errorMsg=ifrm.contentWindow.document.querySelector("#error-msg");var validMsg=ifrm.contentWindow.document.querySelector("#valid-msg");var errorMap=["Invalid number","Invalid country code","Too short","Too long","Invalid number"];var reset=function reset(){input.classList.remove("error");errorMsg.innerHTML="";errorMsg.classList.add("hide")};input.addEventListener("blur",function(){reset();if(input.value.trim()){var iti=ifrm.contentWindow.intlTelInputGlobals.getInstance(input);if(iti.isValidNumber()){}else{input.classList.add("error");var errorCode=iti.getValidationError();errorMsg.innerHTML=errorMap[errorCode]||"Invalid number";errorMsg.classList.remove("hide")}}});input.addEventListener("change",reset);input.addEventListener("keyup",reset)}var form=container.querySelector("form");form.addEventListener("submit",function(){var _ref3=_asyncToGenerator(function*(e){e.preventDefault();enableSubmitButtonsLoading();try{var _formData=new FormData(e.target);var formProps=Object.fromEntries(_formData);if(phoneInput){var _input=phoneInput;if(_input.value.trim()){var iti=ifrm.contentWindow.intlTelInputGlobals.getInstance(_input);if(iti.isValidNumber()){var number=iti.getNumber();formProps.mobile=number}else{disableSubmitButtonsLoading();return}}}for(var name in formProps){if(name.endsWith("[]")){(function(){var fields=container.querySelectorAll("[name=\"".concat(name,"\"]"));var values=[];fields.forEach(field=>{if(field.checked){values.push(field.value)}});formProps[name.slice(0,-2)]=values;delete formProps[name]})()}}var formSubmitResp=yield api.Services.submitForm(popup.id,formProps);if(!formSubmitResp.ok){throw new Error("Something went wrong")}isFormSubmitted=true;var formSubmitRespJson=yield formSubmitResp.json();var respSuccessDoc=formSubmitRespJson.successDoc;var respUid=formSubmitRespJson.uid;if(respUid&&!api.getUidCookie()){api.setUidCookie(respUid)}if(version){var{successData:_successData}=popup;var outerWrapper=ifrm.contentWindow.document.getElementById("OUTER_WRAPPER");var outerWrapperHeight=outerWrapper.offsetHeight;outerWrapper.style.minHeight=outerWrapperHeight+"px";var elementCssStyleElement=ifrm.contentWindow.document.getElementById("elementsCss");elementCssStyleElement.innerHTML=_successData.css;var formContanier=ifrm.contentWindow.document.getElementById("FORM_CONTAINER");if(respSuccessDoc){formContanier.innerHTML=respSuccessDoc}else{formContanier.innerHTML=successDoc}}else{while(container.firstChild){container.removeChild(container.firstChild)}if(respSuccessDoc){container.insertAdjacentHTML("afterbegin",respSuccessDoc)}else{container.insertAdjacentHTML("afterbegin",successDoc)}var _closeIcon=ifrm.contentWindow.document.querySelector(".la-popup-close-icon");formElement=container.querySelector("form");_closeIcon.onclick=closePopup;api.bake_cookie("popup-".concat(popup.id,"-submitted"),true);calculateAndSetClasses()}api.bake_cookie("popup-".concat(popup.id,"-submitted"),true);console.log("done");processButtons(true)}catch(e){console.log(e);disableSubmitButtonsLoading()}});return function(_x3){return _ref3.apply(this,arguments)}}());var formParent=form.parentNode;var calculateAndSetClasses=()=>{var popupModal=container.querySelector("#ijwx");var popupBackdrop=popupModal.parentNode;var type=popupType;if(type==="popup"){popupModal.className=_this.popupClassNames.popupWindow;popupBackdrop.className=_this.popupClassNames.popupBackdrop}else if(type==="flyout"){popupModal.className=_this.popupClassNames.flyoutWindow;popupBackdrop.className=_this.popupClassNames.flyoutBackdrop;animateFlyout&&popupModal.classList.add("".concat(_this.popupClassNames.generalPrefix,"window-").concat(flyoutPosition.charAt(flyoutPosition.length-1)));popupBackdrop.classList.add(_this.popupClassNames.generalPrefix+flyoutPosition);popupModal.classList.add(_this.popupClassNames.slideInAnimation)}};calculateAndSetClasses();if(popupType==="popup"){var backdrop=yield getElement(".".concat(_this.popupClassNames.popupBackdrop),()=>container);backdrop.onclick=function(e){closePopup(e,true)}}var scripts=container.getElementsByTagName("script");while(scripts.length){var script=scripts[0];script.parentNode.removeChild(script);var newScript=document.createElement("script");if(script.src){newScript.src=script.src}else if(script.textContent){newScript.textContent=script.textContent}else if(script.innerText){newScript.innerText=script.innerText}ifrm.contentWindow.document.body.appendChild(newScript)}modalElement.classList.add(popupAnimationClassName);ifrm=document.getElementById(iframeId);if(popup.widgetData){var{css,js,html}=popup.widgetData;var src=api.CurrentScript.src;var scriptUrl=new URL(src);var scriptSearchParams=scriptUrl.searchParams;var shop=scriptSearchParams.get("shop");var widgetContainer=ifrm.contentWindow.document.createElement("div");widgetContainer.innerHTML=html;var style=document.createElement("style");style.innerHTML=css;ifrm.contentWindow.document.body.appendChild(style);var popupModal=container.querySelector("#FORM_CONTAINER");popupModal.appendChild(widgetContainer);var _script=document.createElement("script");var apiBase=window.LATTICE_API;_script.setAttribute("data-base-url",apiBase);_script.setAttribute("data-pid-cookie-name",api.getFullCookieName("pid"));_script.setAttribute("data-shop",shop);_script.innerHTML=js;ifrm.contentWindow.document.head.appendChild(_script);ifrm.contentWindow.Shopify=window.Shopify;ifrm.contentWindow.is_shopagain_widget_popup=true}ifrm.style.visibility="visible";api.Services.createPopupActivity(popup.id,activityType,details={url:window.location.href,view_id:popupViewId})}),300)});function displayPopup(_x){return _displayPopup.apply(this,arguments)}return displayPopup}(),displayButtonToShowLastPopup:function(){var _displayButtonToShowLastPopup=_asyncToGenerator(function*(popup){var lastPopUpButton=document.querySelector(".latticeai-popup-revert-button");if(lastPopUpButton){lastPopUpButton.remove()}var{enable,vertical_position,horizontal_position,background_color,before_popup,after_popup_cancel}=popup.minimize_icon_config;if(!popup||!enable){return}var containerClassName="latticeai-popup-revert-button";var iframeId="latticeai-popup-revert-iframe-button";var container=document.createElement("div");var ifrm=document.createElement("iframe");ifrm.setAttribute("id",iframeId);ifrm.style.visibility="hidden";ifrm.style.position="fixed";ifrm.style.bottom=vertical_position==="bottom"?"0":"auto";ifrm.style.right=horizontal_position==="right"?"0":"auto";ifrm.style.top=vertical_position==="top"?"0":"auto";ifrm.style.left=horizontal_position==="left"?"0":"auto";ifrm.style.width="65px";ifrm.style.height="65px";ifrm.style.margin="15px";ifrm.style.zIndex="2147483647";ifrm.setAttribute("frameborder","0");ifrm.style.borderRadius="50%";ifrm.setAttribute("srcdoc",popup.minimize_icon);container.appendChild(ifrm);container.classList.add(containerClassName);var body=document.body;body.appendChild(container);setTimeout(_asyncToGenerator(function*(){var getElement=(selector,parent)=>new Promise(function(){var _ref5=_asyncToGenerator(function*(resolve){while(!parent().querySelector(selector)){console.log("waiting for element",selector);yield new Promise(res=>setTimeout(res,100))}resolve(parent().querySelector(selector))});return function(_x5){return _ref5.apply(this,arguments)}}());container=yield getElement(".".concat(containerClassName),()=>ifrm.contentWindow.document);var closeIcon=yield getElement(".shopagain-floating-container",()=>container);var closePopup=e=>{api.displayPopup(popup,"OPEN_FROM_BUTTON");ifrm.remove()};closeIcon.onclick=closePopup;ifrm=document.getElementById(iframeId);ifrm.style.visibility="visible"}),300)});function displayButtonToShowLastPopup(_x4){return _displayButtonToShowLastPopup.apply(this,arguments)}return displayButtonToShowLastPopup}(),checkIfPopupCanBeShown(popup){var{behaviour:{frequency:{days_after_closing:show_days_after_closing}={},timing:{add_to_cart}}={}}=popup;if(add_to_cart){return true}var popupSubmitted=api.read_cookie("popup-".concat(popup.id,"-submitted"));if(popupSubmitted)return false;var popup_cookie="popup-".concat(popup.id,"-closed-at");var popupShown=api.read_cookie(popup_cookie);if(popupShown){var popupShownDate=new Date(popupShown);var now=new Date;var timeDiff=Math.abs(now.getTime()-popupShownDate.getTime());var days_since_close=Math.floor(timeDiff/(1000*3600*24));if(isNaN(show_days_after_closing)){show_days_after_closing=10}show_days_after_closing=Number(show_days_after_closing);if(days_since_close<show_days_after_closing){return false}}return true},getFontLinks(doc){var _doc$match;var fontMatches=[];(_doc$match=doc.match(/font-family:\s*([^;}]*)/g))===null||_doc$match===void 0?void 0:_doc$match.forEach(font=>{var fontName=font.match(/font-family:\s*([^;}]*)/)[1];fontMatches.push(fontName)});fontMatches=[...new Set(fontMatches)];var loadUrlLinks=[];fontMatches.forEach(fontMatch=>{api.customFonts.find(customFont=>{if(fontMatch.toLowerCase().includes(customFont.name.toLowerCase())){loadUrlLinks.push(customFont.url)}})});if(loadUrlLinks.length){var fontLinksString="\n                <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n                <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n\n                ".concat(function(){return loadUrlLinks.map(url=>{return"<link href=\"".concat(url,"\" rel=\"stylesheet\">")}).join("")}(),"\n                ");return fontLinksString}},customFonts:[{name:"cabin",url:"https://fonts.googleapis.com/css?family=Cabin:400,700",value:"Cabin, sans-serif"},{name:"Crimson Text",url:"https://fonts.googleapis.com/css?family=Crimson+Text:400,700",value:"'Crimson Text', serif"},{name:"Lato",url:"https://fonts.googleapis.com/css?family=Lato:400,700",value:"'Lato', sans-serif"},{name:"Lobster Two",url:"https://fonts.googleapis.com/css?family=Lobster+Two:400,700",value:"'Lobster Two', cursive"},{name:"QuickSand",url:"https://fonts.googleapis.com/css?family=Quicksand:400,700",value:"'Quicksand', sans-serif"},{name:"Open Sans",url:"https://fonts.googleapis.com/css?family=Open+Sans:400,700",value:"'Open Sans', sans-serif"},{name:"Montserrat",url:"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700",value:"'Montserrat', sans-serif"},{name:"Roboto",url:"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700",value:"'Roboto', sans-serif"}],submitHandler:function submitHandler(firstName,emailAddress){},getFullCookieName(cookieName){if(LATTICEAI_ENV!=="prod"){return"latticeai-popups-".concat(LATTICEAI_ENV,"-").concat(cookieName)}return"latticeai-popups-".concat(cookieName)},bake_cookie(name,value){var isSessionBased=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;name=api.getFullCookieName(name);var date=new Date;var days=365;date.setTime(date.getTime()+10000*24*60*60*1000);var expires="; expires="+date.toUTCString();if(isSessionBased){expires=""}var cookie=[name,"=",JSON.stringify(value),expires,"; domain=.",window.location.host.toString(),"; path=/;"].join("");document.cookie=cookie},getSameNameCookie(name){var value="; ".concat(document.cookie);var parts=value.split("; ".concat(name,"="));if(parts.length===2)return parts.pop().split(";").shift()},read_cookie(name){var exactName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!exactName)name=api.getFullCookieName(name);var result=document.cookie.match(new RegExp(name+"=([^;]+)"));result&&(result=JSON.parse(result[1]));return result},delete_cookie(name){name=api.getFullCookieName(name);document.cookie=[name,"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.",window.location.host.toString()].join("")},getSessionStartTime(){return api.read_cookie("sessionStartTime")},setSessionStartTime(time){api.bake_cookie("sessionStartTime",time)},deleteSessionId:function deleteSessionId(){api.delete_cookie("session_id")},getSessionId(){return api.read_cookie("session_id")||null},setSessionId(time){api.bake_cookie("session_id",time)},setSessionStatus(type){api.bake_cookie("sessionStatus",type)},getSessionStatus(){return api.read_cookie("sessionStatus")},setPopUpSessionMap(type){api.bake_cookie("popUpSessionMap",type,true)},getPopUpSessionMap(){var _api$read_cookie;return(_api$read_cookie=api.read_cookie("popUpSessionMap"))!==null&&_api$read_cookie!==void 0?_api$read_cookie:{}},setPidCookie:function setPidCookie(pid){api.bake_cookie("pid",pid)},getCartToken:function getCartToken(){return api.getSameNameCookie("cart")},getPidCookie:function getPidCookie(){return api.read_cookie("pid")},setSessionInactiveTime:function setSessionInactiveTime(time){api.bake_cookie("inactiveTime",time)},getSessionInactiveTime:function getSessionInactiveTime(){return api.read_cookie("inactiveTime")||null},deleteSessionInactiveTime:function deleteSessionInactiveTime(){api.delete_cookie("inactiveTime")},setUidCookie:function setUidCookie(uid){api.bake_cookie("uid",uid)},getUidCookie:function getUidCookie(){return api.read_cookie("uid")},deleteUidCookie:function deleteUidCookie(){api.delete_cookie("uid")},deletePidCookie:function deletePidCookie(){api.delete_cookie("pid")},isMobileDevice:function isMobileDevice(){return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},preloadImagesFromHtmlString:function(){var _preloadImagesFromHtmlString=_asyncToGenerator(function*(htmlString){var imageUrls=htmlString.match(/(http)?s?:?(\/\/[^"']*\.(?:png|jpg|jpeg|gif|png|svg|webp))/g);var images=imageUrls.filter(image=>!image.includes("cdnjs")).map(url=>{return new Promise((resolve,reject)=>{var img=new Image;img.onload=()=>resolve(url);img.onerror=()=>reject(url);img.src=url})});try{yield Promise.allSettled(images)}catch(e){}});function preloadImagesFromHtmlString(_x6){return _preloadImagesFromHtmlString.apply(this,arguments)}return preloadImagesFromHtmlString}(),popupClassNames:{popupWindow:"latticeai-popup-window"+randomKey,flyoutWindow:"latticeai-flyout-window"+randomKey,popupBackdrop:"latticeai-popup-backdrop"+randomKey,flyoutBackdrop:"latticeai-flyout-backdrop"+randomKey,slideInAnimation:"latticeai-slide-in-animation"+randomKey,slideInAnimationKeyFrame:"latticeai-slide-in-animation-key-frame"+randomKey,generalPrefix:"latticeai-popups"+randomKey+"-"},Services:{getQueryString:function getQueryString(parameters){var kvps=[];var keys=Object.getOwnPropertyNames(parameters);for(var i=0;i<keys.length;i++){var key=keys[i];kvps.push(key+"="+parameters[key])}var qs="?"+kvps.join("&");return qs},updateOptions:function updateOptions(options){var update=_objectSpread({},options);update.headers=_objectSpread(_objectSpread({},update.headers),{},{"companyid":api.company_id,"apikey":api.apikey});if(update.body){function fromEntries(entries){var res={};for(var i=0;i<entries.length;i++){res[entries[i][0]]=entries[i][1]}return res}if(!Object.fromEntries)Object.fromEntries=fromEntries;var body=JSON.parse(update.body);var newBody=_objectSpread({script_query_params:Object.fromEntries(api.scriptSearchParams)},body);update.body=JSON.stringify(newBody)}return update},baseUrl:window.LATTICE_API,getUrl:function getUrl(path){return new URL(path,this.baseUrl).toString()},getPopupUser:function getPopupUser(shopify_customer_id,pid,uid){return fetch(this.getUrl("/campaigns/popups/get_popup_user/"),this.updateOptions({method:"POST",body:JSON.stringify({shopify_customer_id,pid,uid,user_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}),headers:{"Content-Type":"application/json"}}))},getCartDetails:function getCartDetails(){return fetch("/cart.js").then(response=>response.json())},createOrUpdateCart:function createOrUpdateCart(params){return fetch(this.getUrl("/audience/cart/"),this.updateOptions({method:"POST",body:JSON.stringify(params),headers:{"Content-Type":"application/json"}}))},createEventActivity:function createEventActivity(params){return fetch(this.getUrl("/campaigns/event/"),this.updateOptions({method:"POST",body:JSON.stringify(params),headers:{"Content-Type":"application/json"}}))},createPopupActivity:function createPopupActivity(id,activity_type){var details=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return fetch(this.getUrl("/campaigns/popups/".concat(id,"/popup_activity/")),this.updateOptions({method:"POST",body:JSON.stringify({activity_type:activity_type,pid:api.getPidCookie(),uid:api.getUidCookie(),details:details,session_id:api.session_id||null}),headers:{"Content-Type":"application/json"}}))},getConfig:function getConfig(pid,uid){var queryStringParams={};pid&&(queryStringParams.pid=pid);uid&&(queryStringParams.uid=uid);queryStringParams.isMobile=api.isMobileDevice();return fetch(this.getUrl("/campaigns/popups/get_config/")+this.getQueryString(queryStringParams),this.updateOptions({}))},submitForm:function submitForm(id,form_data){return fetch(this.getUrl("/campaigns/popups/".concat(id,"/submit_form/")),this.updateOptions({method:"POST",body:JSON.stringify({form_data:form_data,pid:api.getPidCookie(),uid:api.getUidCookie()}),headers:{"Content-Type":"application/json"}}))}}};var polyfillScript=document.createElement("script");polyfillScript.src="https://polyfill.io/v3/polyfill.min.js?callback=on_shopagainio_".concat(LATTICEAI_ENV,"_polyfill_load&features=Intl%2Cblissfuljs%2Cdefault%2Cdom4%2Ces2015%2Ces2016%2Ces2017%2Ces2018%2Ces2019%2Ces2020%2Ces2021%2Ces2022%2Ces5%2Ces6%2Ces7");document.head.appendChild(polyfillScript);api.CurrentScript=document.currentScript;window["on_shopagainio_".concat(LATTICEAI_ENV,"_polyfill_load")]=()=>{if(api.isCookiesEnabled){api.start()}api.addWidgetScript(new URL(api.CurrentScript.src))}})();
//# sourceMappingURL=shopagain_script.js.map